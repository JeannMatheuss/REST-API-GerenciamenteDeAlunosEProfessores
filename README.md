# REST API - Gerenciamento de Alunos e Professores

[![Java](https://img.shields.io/badge/Java-17-blue?style=for-the-badge&logo=java)](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.7-green?style=for-the-badge&logo=spring)](https://spring.io/projects/spring-boot)
[![Maven](https://img.shields.io/badge/Maven-Central-red?style=for-the-badge&logo=apache-maven)](https://maven.apache.org/)
[![Oracle](https://img.shields.io/badge/Oracle-DB-orange?style=for-the-badge&logo=oracle)](https://www.oracle.com/database/)
[![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen?style=for-the-badge&logo=junit)](https://junit.org/)

## Descrição

Esta é uma REST API simples desenvolvida com **Spring Boot** para gerenciar entidades de **Alunos** e **Professores** em um banco de dados Oracle. A API suporta operações CRUD (Create, Read, Update, Delete) para ambas as entidades, com validações de entrada no nível do serviço.

- **Alunos**: Armazena ID, nome e curso.  
- **Professores**: Armazena ID, nome, departamento, email (com validação de formato) e titulação.

A API usa **JDBC puro** para conexão com o banco Oracle, com configuração via variáveis de ambiente. Inclui documentação automática via **Swagger UI** e testes unitários com **JUnit 5** e **Mockito**.

## Tecnologias Utilizadas

- **Backend**: Spring Boot 3.2.7 (Web, JDBC)  
- **Banco de Dados**: Oracle Database (driver ojdbc11)  
- **Documentação**: SpringDoc OpenAPI (Swagger UI)  
- **Testes**: JUnit 5, Mockito, H2 (para testes em memória, opcional)  
- **Build**: Maven  
- **Linguagem**: Java 17  

## Pré-requisitos

- **Java 17** instalado (recomendado: OpenJDK ou Oracle JDK).  
- **Maven 3.6+** para build e execução.  
- **Banco de Dados Oracle** acessível (ex.: Oracle 19c ou superior). Você precisa de:  
  - Uma instância Oracle rodando.  
  - Tabelas criadas:  
    - `ALUNO` (ID NUMBER PRIMARY KEY, NOME VARCHAR(150), CURSO VARCHAR(150))  
    - `PROFESSOR` (ID NUMBER PRIMARY KEY, NOME VARCHAR(150), DEPARTAMENTO VARCHAR(100), EMAIL VARCHAR(150), TITULACAO VARCHAR(80))  
- **Variáveis de Ambiente** (opcional, mas recomendado para segurança):  
  - `ORACLE_URL`: URL de conexão JDBC (default: `jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl`).  
  - `ORACLE_USER`: Usuário do banco (default: `RM`).  
  - `ORACLE_PASSWORD`: Senha do banco (default: `ddmmaa` – **mude isso em produção!**).  

Se não tiver Oracle, você pode configurar H2 para desenvolvimento local (veja seção de Configuração).

## Instalação

1. **Clone o Repositório**:

   ```bash
   git clone https://github.com/JeannMatheuss/REST-API-GerenciamentoDeAlunosEProfessores
   cd REST-API-GerenciamentoDeAlunosEProfessores

2. **Compile o Projeto**:

  ```bash
  mvn clean compile
  ```

3. **Execute a Aplicação**:

   ```bash
   mvn spring-boot:run
   ```
   
A API estará disponível em http://localhost:8080.

## Configuração

**Conexão com o Banco de Dados**

- Edite as variáveis de ambiente ou crie um arquivo **application.properties** em src/main/resources com:
  ```properties
  spring.datasource.url=${ORACLE_URL:jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl}
  spring.datasource.username=${ORACLE_USER:RM}
  spring.datasource.password=${ORACLE_PASSWORD:ddmmaa}
  spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
  ```
  
- Para desenvolvimento local com H2 (banco em memória, sem Oracle), adicione em **application.properties**:
  ```properties
  spring.datasource.url=jdbc:h2:mem:testdb
  spring.datasource.driver-class-name=org.h2.Driver
  spring.datasource.username=sa
  spring.datasource.password=
  spring.h2.console.enabled=true  # Acesse http://localhost:8080/h2-console
  ```

- Crie as tabelas manualmente via script SQL ou adapte os repositórios para H2.

  ## Scripts SQL para Tabelas (Oracle)
  
  Execute no seu banco Oracle para criar as tabelas:
    ```sql
    -- Tabela ALUNO
  CREATE TABLE ALUNO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL,
    CURSO VARCHAR2(150) NOT NULL
  );
  
  -- Tabela PROFESSOR
  CREATE TABLE PROFESSOR (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL,
    DEPARTAMENTO VARCHAR2(100) NOT NULL,
    EMAIL VARCHAR2(150) NOT NULL,
    TITULACAO VARCHAR2(80)
  );
  
  -- Índices opcionais para performance
  CREATE INDEX IDX_ALUNO_NOME ON ALUNO(NOME);
  CREATE INDEX IDX_PROFESSOR_EMAIL ON PROFESSOR(EMAIL);
  ```

## Uso

**EndPoints Disponíveis**
Alunos (`/api/alunos`)
- POST /api/alunos (Criar):
  - Body: { "nome": "João Silva", "curso": "Engenharia" }
  
  - Resposta: 201 Created com o Aluno salvo (inclui ID gerado).

- GET /api/alunos (Listar):
  
  - Retorna lista de todos os Alunos.

- GET /api/alunos/{id} (Buscar por ID):
  
  - Retorna o Aluno ou 404 Not Found.

- PUT /api/alunos/{id} (Atualizar):
  
  - Body: { "nome": "João Atualizado", "curso": "Novo Curso" }
  
  - Resposta: 200 OK com o Aluno atualizado ou 404 Not Found.

- DELETE /api/alunos/{id} (Deletar):
  
  - Resposta: 204 No Content se deletado, ou 404 Not Found.


Professores (`/api/professores`)
- POST /api/professores (Criar):
  
  - Body: { "nome": "Maria Santos", "departamento": "TI", "email": "maria@email.com", "titulacao": "Doutora" }
  
  - Resposta: 201 Created com o Professor salvo (inclui ID gerado).
  
  - Validação: Email deve ser válido (regex simples).


- GET /api/professores (Listar):
  
  - Retorna lista de todos os Professores.


- GET /api/professores/{id} (Buscar por ID):
  
  - Retorna o Professor ou 404 Not Found.


- PUT /api/professores/{id} (Atualizar):
  
  - Body similar ao POST.
  
  - Resposta: 200 OK com o Professor atualizado ou 404 Not Found.


- DELETE /api/professores/{id} (Deletar):
  
  - Resposta: 204 No Content se deletado, ou 404 Not Found.

## Validações

- Alunos: Nome e curso obrigatórios, máx. 150 caracteres cada. ID deve ser > 0.
- Professores: Nome, departamento e email obrigatórios (email válido via regex). Máx.: nome (150), departamento (100), email (150), titulação (80). Titulação opcional. ID > 0.
- Erros de validação retornam 400 Bad Request com mensagem detalhada.

## Exemplo de Requisição (via CURL)
  ```bash
  # Criar Aluno
  curl -X POST http://localhost:8080/api/alunos \
    -H "Content-Type: application/json" \
    -d '{"nome": "João Silva", "curso": "Engenharia de Software"}'

  # Listar Alunos
  curl -X GET http://localhost:8080/api/alunos
  
  # Atualizar Professor
  curl -X PUT http://localhost:8080/api/professores/1 \
    -H "Content-Type: application/json" \
    -d '{"nome": "Maria Atualizado", "departamento": "TI", "email": "maria2@email.com", "titulacao": "Mestre"}'
  ```

## Testes
O projeto inclui testes unitários para os serviços (AlunoService e ProfessorService), cobrindo cenários de sucesso, falhas de validação e casos de não-encontrado. Usa Mockito para mockar repositórios.

- Rodar Todos os Testes:
  ```bash
  mvn clean test
  ```

- Rodar Teste Específico (ex.: AlunoService):
  ```bash
  mvn test -Dtest=AlunoServiceTest
  ```

- Cobertura de Testes (Opicional):
  Adicione o plugin JaCoCo no pom.xml e rode:
  ```bash
  mvn jacoco:report
  ```

- Testes de Integração:
Não incluídos por padrão (devido à dependência de Oracle). Para adicionar, use `@SpringBootTest` com H2 e configure perfis de teste.

## Estrutura do Projeto
  ```bash
  restapi-crud/
  ├── src/
  │   ├── main/
  │   │   ├── java/com/fiap/restapi/
  │   │   │   ├── config/          # ConnectionFactory (JDBC)
  │   │   │   ├── controller/      # AlunoController, ProfessorController
  │   │   │   ├── model/           # Aluno, Professor (POJOs)
  │   │   │   ├── repository/      # AlunoRepository, ProfessorRepository (JDBC)
  │   │   │   ├── service/         # AlunoService, ProfessorService (lógica de negócio)
  │   │   │   └── RestapiApplication.java  # Classe principal
  │   │   └── resources/
  │   │       └── application.properties  # Configurações (opcional)
  │   └── test/
  │       ├── java/com/fiap/restapi/    #  Testes unitários (AlunoServiceTest, ProfessorServiceTest)
  │       │
  │       │   
  │       └── resources/           # Dados de teste (ex.: SQL scripts)
  ├── pom.xml                      # Dependências Maven
  └── README.md                    # Este arquivo
  ```

## Contribuição
- Fork o projeto.
  
- Crie uma branch para sua feature (git checkout -b feature/nova-funcionalidade).
  
- Commit suas mudanças (git commit -m 'Adiciona nova funcionalidade').
  
- Push para a branch (git push origin feature/nova-funcionalidade).
  
- Abra um Pull Request.

## Autor
- Desenvolvido por: Jean Matheus
  
- Contato: `ojeanoliveira06@gmail.com`
  
- Repositório: https://github.com/JeannMatheuss/REST-API-GerenciamenteDeAlunosEProfessores
